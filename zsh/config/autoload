set -e

() {
	local my_fpath=(
		$(eval echo $HOME/sync/linux/**/functions)
		$(eval echo $DOTFILES/**/functions)
	)

	for funcs in "$my_fpath[@]"; do
		typeset -TUg +x FPATH=$funcs:$FPATH fpath

		if [[ -d $funcs ]]; then
			if [ -z "$(ls -A $funcs)" ]; then
				continue
			fi
			autoload -Uz ${=$(cd "$funcs" && echo *)} 1>/dev/null || true
		fi
	done
}

set +e
