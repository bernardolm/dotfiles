#!/usr/bin/env zsh

command -v zsh >/dev/null || (echo 'you needs to install zsh before' && return)

# find ~ -maxdepth 1 -name "*.bkp" -delete
find ~ -name '.zcompdump*' -delete

local files=('.zlogin' '.zlogout' '.zprofile' '.zshenv' '.zshrc')
for f in $files; do
    dest_path="${HOME}/${f}"
    # [ -e "$dest_path" ] && mv "$dest_path" "${dest_path}_${TIMESTAMP}.bkp"
    ln -sf "${DOTFILES}/zsh/startup/${f}" "$dest_path"
done

zsh_plugins_install

if [ -d $ZSH_HOME/plugins/dracula/zsh ]; then
    [ ! -d $ZSH/themes/lib ] && mkdir -p $ZSH/themes/lib
    ln -sf $ZSH_HOME/plugins/dracula/zsh/lib/async.zsh $ZSH/themes/lib/async.zsh
    ln -sf $ZSH_HOME/plugins/dracula/zsh/dracula.zsh-theme $ZSH/themes/dracula.zsh-theme
fi
