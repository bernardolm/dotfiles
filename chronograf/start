#!/usr/bin/env zsh

INFLUX_URL="http://$(docker inspect --format '{{ .NetworkSettings.IPAddress }}' influxdb):8086"

docker run \
    --name chronograf \
    --restart always \
    -d \
    -e "INFLUXDB_PASSWORD=${INFLUX_ADMIN_PASSWORD}" \
    -e "INFLUXDB_URL=${INFLUX_URL}" \
    -e "INFLUXDB_USERNAME=${INFLUX_ADMIN_USERNAME}" \
    -e LOG_LEVEL=debug \
    -e REPORTING_DISABLED=true \
    -p 8888:8888 \
    -v "${SYNC_DOTFILES}/chronograf:/var/lib/chronograf" \
    chronograf:1.8-alpine
